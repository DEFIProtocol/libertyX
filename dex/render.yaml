services:
  # Backend API service
  - type: web
    name: libertyx-backend
    runtime: node
    repo: https://github.com/defiprotocol/libertyX  # Update with your actual repo URL
    plan: free
    buildCommand: cd server && npm install
    startCommand: cd server && node index.js
    healthCheckPath: /api/health

  # Frontend static site
  - type: static
    name: libertyx-frontend
    runtime: static
    repo: https://github.com/defiprotocol/libertyX  # Update with your actual repo URL
    buildCommand: cd dex && npm install && npm run build
    staticPublishPath: ./dex/build
    pullRequestPreviewsEnabled: true
    routes:
      - type: rewrite
        source: /*
        destination: /index.html